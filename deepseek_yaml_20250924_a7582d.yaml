# In CodePipeline configuration
Stages:
  - Name: Source
    Actions:
      - Name: SourceAction
        ActionTypeId:
          Category: Source
          Owner: AWS
          Provider: CodeCommit
        OutputArtifacts:
          - Name: MyAppSource
        Configuration:
          RepositoryName: funland-repo
          BranchName: main
          
  - Name: Deploy
    Actions:
      - Name: DeployAction
        ActionTypeId:
          Category: Deploy
          Owner: AWS
          Provider: ElasticBeanstalk
        InputArtifacts:
          - Name: MyAppSource
        Configuration:
          ApplicationName: funland-app
          EnvironmentName: funland-production
          # Enable automatic rollback on failure
          RollbackOnFailure: true